<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>广州美食 - 广州特色</title>
  <!-- 引入外部资源 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue-router@3.5.3/dist/vue-router.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vuex@3.6.2/dist/vuex.js"></script>
  <!-- 引入Vuex Store和Router -->
  <script src="js/store.js"></script>
  <script src="js/router.js"></script>
  <!-- 引入主JavaScript文件 -->
  <script src="js/main.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- 引入自定义样式 -->
  <link rel="stylesheet" href="css/style.css">
  
  <!-- Tailwind配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#D4AF37', // 金色（广州特色）
            secondary: '#006400', // 深绿色（代表广州的自然景观）
            accent: '#8B0000', // 深红色（代表传统文化）
            neutral: '#F5F5DC', // 米色（温暖色调）
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            serif: ['Georgia', 'serif'],
          },
        },
      }
    }
  </script>
</head>
<body>
    <div id="app">
    <!-- 导航栏 -->
    <navbar></navbar>

  <!-- 美食页面头部 -->
  <section class="pt-24 pb-12 bg-gradient-to-b from-secondary/10 to-white">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-secondary mb-4">广式美食</h1>
      <p class="text-gray-600 max-w-3xl mx-auto text-lg">品味广州独特的美食文化，从精致的早茶点心到地道的烧腊卤味，每一道菜都展现了粤菜的精髓。</p>

      <!-- 美食分类筛选 -->
      <div class="flex flex-wrap gap-2 justify-center px-2 mt-8 mb-12">
        <button class="px-3 py-1.5 sm:px-4 sm:py-2 rounded-full bg-primary text-white hover:bg-primary/90 transition-colors text-sm sm:text-base" 
                @click="filterFoods('all')">
          全部美食
        </button>
        <button class="px-3 py-1.5 sm:px-4 sm:py-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors text-sm sm:text-base" 
                @click="filterFoods('dimsum')">
          早茶点心
        </button>
        <button class="px-3 py-1.5 sm:px-4 sm:py-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors text-sm sm:text-base" 
                @click="filterFoods('roast')">
          烧腊卤味
        </button>
        <button class="px-3 py-1.5 sm:px-4 sm:py-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors text-sm sm:text-base" 
                @click="filterFoods('specialty')">
          特色小吃
        </button>
        <button class="px-3 py-1.5 sm:px-4 sm:py-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors text-sm sm:text-base" 
                @click="filterFoods('dessert')">
          甜品糕点
        </button>
      </div>
    </div>
  </section>

  <!-- 美食列表 -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <!-- 美食专题表头 -->
      <div class="flex flex-col md:flex-row items-start md:items-center justify-between mb-8">
        <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-secondary mb-4 md:mb-0">
          精选美食
        </h2>
      </div>
      
      <div id="foodCards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <!-- 骨架屏 -->
        <template v-if="isLoadingFoods">
          <div v-for="i in 6" :key="'skeleton-' + i" class="bg-white rounded-xl overflow-hidden shadow-md">
            <div class="relative">
              <div class="h-48 sm:h-64 overflow-hidden">
                <div class="w-full h-full bg-gray-200 animate-pulse"></div>
              </div>
              <div class="absolute top-3 left-3 bg-gray-200 animate-pulse text-sm font-medium px-3 py-1 rounded-full w-24 h-6"></div>
            </div>
            <div class="p-6">
              <div class="flex items-center justify-between mb-3">
                <div class="bg-gray-200 animate-pulse rounded w-32 h-8"></div>
                <div class="bg-gray-200 animate-pulse rounded-full w-6 h-6"></div>
              </div>
              <div class="bg-gray-200 animate-pulse rounded h-10 mb-4"></div>
              <div class="flex flex-wrap gap-2 mb-4">
                <div class="bg-gray-200 animate-pulse rounded-full px-3 py-1 w-16 h-5"></div>
                <div class="bg-gray-200 animate-pulse rounded-full px-3 py-1 w-16 h-5"></div>
              </div>
              <div class="flex items-center mt-auto">
                <div class="flex items-center">
                  <div class="flex">
                    <div v-for="i in 5" :key="i" class="bg-gray-200 animate-pulse rounded-full w-4 h-4 mr-1"></div>
                  </div>
                  <div class="bg-gray-200 animate-pulse rounded ml-2 w-8 h-4"></div>
                </div>
                <div class="ml-auto bg-gray-200 animate-pulse rounded w-24 h-6"></div>
              </div>
            </div>
          </div>
        </template>
        
        <!-- 美食卡片 -->
        <template v-else-if="foods && foods.length > 0">
          <div v-for="food in foods" :key="food.id" 
               class="bg-white rounded-xl overflow-hidden shadow-md food-card--hover food-card" 
               :data-category="food.category">
          <div class="relative group">
              <div class="h-48 sm:h-64 overflow-hidden">
                <img v-bind:src="food.image" v-bind:alt="food.name" 
                     class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
              </div>
            <div class="absolute top-3 left-3 bg-primary/90 text-white text-sm font-medium px-3 py-1 rounded-full">
              {{ food.category === 'dimsum' ? '早茶点心' : food.category === 'roast' ? '烧腊卤味' : food.category === 'specialty' ? '特色小吃' : '甜品糕点' }}
            </div>
          </div>
          <div class="p-6">
            <div class="flex items-center justify-between mb-3">
              <h3 class="text-2xl font-bold text-secondary">{{ food.name }}</h3>
              <button @click="toggleFavorite('food', food.id)" class="text-xl hover:text-primary transition-colors">
                <i class="fa" :class="isFavorite('food', food.id) ? 'fa-heart text-red-500' : 'fa-heart-o text-gray-400'"></i>
              </button>
            </div>
            <p class="text-gray-600 mb-4">{{ food.description }}</p>
            <div class="flex flex-wrap gap-2 mb-4">
              <span v-for="tag in food.tags" :key="tag" 
                    class="px-3 py-1 bg-secondary-opacity-10 text-secondary text-xs rounded-full">{{ tag }}</span>
            </div>
            <div class="flex items-center mt-auto">
              <div class="flex items-center">
                <div class="flex text-yellow-400">
                  <i v-for="i in 5" :key="i" 
                     class="fa" 
                     :class="i <= Math.floor(food.rating) ? 'fa-star' : 
                            i === Math.floor(food.rating) + 1 && food.rating % 1 >= 0.5 ? 'fa-star-half-o' : 'fa-star-o'">
                  </i>
                </div>
                <span class="text-gray-600 text-sm ml-2">{{ food.rating }}/5</span>
              </div>
              <button class="ml-auto text-primary hover:text-accent transition-colors" @click="openFoodDetail(food.id)">
                查看推荐餐厅 <i class="fa fa-arrow-right ml-1"></i>
              </button>
            </div>
          </div>
        </div>
        </template>
        
        <!-- 没有找到美食数据时的提示 -->
        <div v-else class="col-span-full text-center py-12">
          <i class="fa fa-utensils text-4xl text-gray-400 mb-4"></i>
          <h3 class="text-xl font-bold text-gray-500 mb-2">没有找到美食数据</h3>
          <p class="text-gray-400">请稍后再试或联系网站管理员</p>
        </div>
      </div>
    </div>
  </section>

  <!-- 推荐餐厅 -->
  <section class="py-16 bg-neutral-50">
    <div class="container mx-auto px-4">
      <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-secondary mb-12 text-center">推荐餐厅</h2>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div class="bg-white rounded-xl overflow-hidden shadow-md card-hover">
          <div class="relative">
            <img src="assets/images/Attraction/陶陶居.png" alt="陶陶居" class="w-full h-64 object-cover">
            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6">
              <h3 class="text-xl font-bold text-white">陶陶居</h3>
              <div class="flex items-center text-white/80">
                <i class="fa fa-map-marker mr-2"></i>
                <span>荔湾区第十甫路20号</span>
              </div>
            </div>
          </div>
          <div class="p-6">
            <p class="text-gray-600 mb-4">创立于1880年的百年老字号，以传统粤菜和精致点心闻名，是品尝正宗广式早茶的好去处。</p>
            <div class="flex flex-wrap gap-2 mb-4">
              <span class="px-3 py-1 bg-secondary-opacity-10 text-secondary text-xs rounded-full">老字号</span>
                  <span class="px-3 py-1 bg-secondary-opacity-10 text-secondary text-xs rounded-full">早茶</span>
                  <span class="px-3 py-1 bg-secondary-opacity-10 text-secondary text-xs rounded-full">粤菜</span>
            </div>
            <a href="#" class="inline-flex items-center text-primary hover:text-accent transition-colors">
              查看详情 <i class="fa fa-arrow-right ml-1"></i>
            </a>
          </div>
        </div>

        <div class="bg-white rounded-xl overflow-hidden shadow-md card-hover">
          <div class="relative">
            <img src="assets/images/Attraction/点都德.png" alt="点都德" class="w-full h-64 object-cover">
            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6">
              <h3 class="text-xl font-bold text-white">点都德</h3>
              <div class="flex items-center text-white/80">
                <i class="fa fa-map-marker mr-2"></i>
                <span>越秀区北京路295号</span>
              </div>
            </div>
          </div>
          <div class="p-6">
            <p class="text-gray-600 mb-4">广州知名连锁茶楼，以创新点心和亲民价格著称，虾饺、叉烧包、红米肠是其招牌美食。</p>
            <div class="flex flex-wrap gap-2 mb-4">
              <span class="px-3 py-1 bg-secondary-opacity-10 text-secondary text-xs rounded-full">连锁</span>
                  <span class="px-3 py-1 bg-secondary-opacity-10 text-secondary text-xs rounded-full">早茶</span>
                  <span class="px-3 py-1 bg-secondary-opacity-10 text-secondary text-xs rounded-full">创新</span>
            </div>
            <a href="#" class="inline-flex items-center text-primary hover:text-accent transition-colors">
              查看详情 <i class="fa fa-arrow-right ml-1"></i>
            </a>
          </div>
        </div>

        <div class="bg-white rounded-xl overflow-hidden shadow-md card-hover">
          <div class="relative">
            <img src="assets/images/Attraction/炳胜酒家.png" alt="炳胜品味" class="w-full h-64 object-cover">
            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6">
              <h3 class="text-xl font-bold text-white">炳胜品味</h3>
              <div class="flex items-center text-white/80">
                <i class="fa fa-map-marker mr-2"></i>
                <span>天河区天河路208号</span>
              </div>
            </div>
          </div>
          <div class="p-6">
            <p class="text-gray-600 mb-4">主打新派粤菜的高端餐厅，烧味、海鲜和炖汤是其特色，环境优雅，适合家庭聚餐和商务宴请。</p>
            <div class="flex flex-wrap gap-2 mb-4">
              <span class="px-3 py-1 bg-secondary-opacity-10 text-secondary text-xs rounded-full">高端</span>
                  <span class="px-3 py-1 bg-secondary-opacity-10 text-secondary text-xs rounded-full">粤菜</span>
                  <span class="px-3 py-1 bg-secondary-opacity-10 text-secondary text-xs rounded-full">海鲜</span>
            </div>
            <a href="#" class="inline-flex items-center text-primary hover:text-accent transition-colors">
              查看详情 <i class="fa fa-arrow-right ml-1"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 美食文化 -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
        <div>
          <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-secondary mb-6">广式美食文化</h2>
          <p class="text-gray-600 mb-6 leading-relaxed">
            粤菜是中国八大菜系之一，以鲜、嫩、滑、爽、香、脆为特点，讲究清而不淡，鲜而不俗，嫩而不生，油而不腻。广州作为粤菜的发源地之一，拥有丰富多样
          </p>
          <p class="text-gray-600 mb-6 leading-relaxed">
            广式美食文化历史悠久，可追溯至两千多年前。早茶文化是广州饮食文化的重要组成部分，"食在广州"的说法闻名遐迩。广州人喜爱饮茶，不仅是为了解渴，更是一种社交和休闲方式。
          </p>
          <p class="text-gray-600 leading-relaxed">
            除了早茶，广州还有许多特色小吃和名菜，如肠粉、云吞面、烧鹅、白切鸡等。这些美食不仅口味独特，还蕴含着丰富的文化内涵，是广州文化的重要象征。
          </p>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <img src="assets/images/food/xiaojiao.jpg" alt="广式美食" class="rounded-lg shadow-md transform hover:scale-105 transition-transform duration-300">
          <img src="assets/images/food/粤菜.jpg" alt="广州早茶" class="rounded-lg shadow-md transform hover:scale-105 transition-transform duration-300 mt-8">
          <img src="assets/images/food/白切鸡.png" alt="粤菜烹饪" class="rounded-lg shadow-md transform hover:scale-105 transition-transform duration-300">
          <img src="assets/images/food/艇仔粥.png" alt="广州美食街" class="rounded-lg shadow-md transform hover:scale-105 transition-transform duration-300 mt-8">
        </div>
      </div>
    </div>
  </section>

<!-- 页脚 -->
      <footer-component></footer-component>

  <!-- 登录模态框 -->
  <div id="loginModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 bg-blur hidden"
       :class="{ 'hidden': !loginModalVisible }">
    <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-8 transform transition-all duration-300"
         :class="{ 'opacity-0 scale-95': !modalReady, 'opacity-100 scale-100': modalReady }">
      <div class="text-center mb-6">
        <h3 class="text-2xl font-bold text-secondary">用户登录</h3>
        <p class="text-gray-500">请输入您的账号和密码</p>
      </div>
      
      <form class="space-y-4">
        <div>
          <label for="loginEmail" class="block text-sm font-medium text-gray-700 mb-1">邮箱</label>
          <input 
            type="email" 
            id="loginEmail" 
            v-model="login.email" 
            @blur="validateLoginField('email')" 
            class="form-input" 
            placeholder="your@email.com">
          <p class="text-red-500 text-sm mt-1" v-if="login.errors.email">
            {{ login.errors.email }}
          </p>
        </div>
        
        <div>
          <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">密码</label>
          <input 
            type="password" 
            id="loginPassword" 
            v-model="login.password" 
            @blur="validateLoginField('password')" 
            class="form-input" 
            placeholder="••••••••">
          <button type="button" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600" @click="togglePasswordVisibility">
            <i class="fa" :class="passwordVisible ? 'fa-eye-slash' : 'fa-eye'"></i>
          </button>
          <p class="text-red-500 text-sm mt-1" v-if="login.errors.password">
            {{ login.errors.password }}
          </p>
        </div>
        
        <div class="flex items-center justify-between">
          <div class="flex items-center">
            <input 
              type="checkbox" 
              id="remember" 
              v-model="login.remember" 
              class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
            <label for="remember" class="ml-2 block text-sm text-gray-700">记住我</label>
          </div>
          <a href="#" class="text-sm text-primary hover:text-accent">忘记密码?</a>
        </div>
        
        <div>
          <button 
            type="button" 
            @click="loginUser" 
            class="w-full btn-primary flex items-center justify-center"
            :disabled="login.errors.email || login.errors.password || !login.email || !login.password">
            <i class="fa fa-sign-in mr-2"></i> 登录
          </button>
        </div>
        
        <div class="flex items-center my-4">
          <div class="flex-grow h-px bg-gray-300"></div>
          <span class="px-4 text-sm text-gray-500">或使用以下方式登录</span>
          <div class="flex-grow h-px bg-gray-300"></div>
        </div>
        
        <div class="grid grid-cols-3 gap-4">
          <button type="button" class="flex items-center justify-center py-2 px-4 border border-gray-300 rounded-md text-gray-600 hover:bg-gray-50 transition-colors">
            <i class="fa fa-weixin text-green-600 text-xl"></i>
          </button>
          <button type="button" class="flex items-center justify-center py-2 px-4 border border-gray-300 rounded-md text-gray-600 hover:bg-gray-50 transition-colors">
            <i class="fa fa-qq text-blue-500 text-xl"></i>
          </button>
          <button type="button" class="flex items-center justify-center py-2 px-4 border border-gray-300 rounded-md text-gray-600 hover:bg-gray-50 transition-colors">
            <i class="fa fa-weibo text-red-500 text-xl"></i>
          </button>
        </div>
        
        <div class="text-center text-sm text-gray-600 mt-6">
          还没有账号? <a href="#" class="text-primary hover:text-accent font-medium">立即注册</a>
        </div>
      </form>
    </div>
  </div>

  <!-- 引入主脚本文件 -->
  <script src="js/main.js"></script>
  <script>
    new Vue({
      el: '#app',
      store: store,
      data: {
        mobileMenuVisible: false,
        loginModalVisible: false,
        modalReady: false,
        login: {
          email: '',
          password: '',
          remember: false,
          errors: {},
          message: '',
          isSuccess: false
        },
        passwordVisible: false,
        // 收藏功能数据
        favorites: JSON.parse(localStorage.getItem('favorites') || '{}')
      },
      computed: {
        foods() {
          return this.$store.getters.filteredFoods;
        },
        isLoadingFoods() {
          return this.$store.state.loading.foods;
        }
      },
      created() {
        console.log('Vue instance created, store:', this.$store);
        console.log('Initial store state:', this.$store.state);
        // 加载美食数据
        this.$store.dispatch('loadFoods')
          .then(data => {
            console.log('loadFoods action completed, data:', data);
            console.log('Store state after loading:', this.$store.state);
          })
          .catch(error => {
            console.error('Error loading foods:', error);
          });
      },
      mounted() {
        // 初始化路由
        initRouter(this);
      },
      methods: {
        filterFoods(category) {
          this.$store.commit('setFoodFilter', category);
        },
        toggleMobileMenu() {
          this.mobileMenuVisible = !this.mobileMenuVisible;
        },
        openLoginModal() {
          this.loginModalVisible = true;
          setTimeout(() => {
            this.modalReady = true;
          }, 100);
        },
        closeLoginModal() {
          this.modalReady = false;
          setTimeout(() => {
            this.loginModalVisible = false;
          }, 300);
        },
        validateLoginField(field) {
          if (field === 'email') {
            if (!this.login.email) {
              this.login.errors.email = '邮箱不能为空';
            } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.login.email)) {
              this.login.errors.email = '请输入有效的邮箱地址';
            } else {
              this.login.errors.email = '';
            }
          } else if (field === 'password') {
            if (!this.login.password) {
              this.login.errors.password = '密码不能为空';
            } else if (this.login.password.length < 6) {
              this.login.errors.password = '密码长度至少为6位';
            } else {
              this.login.errors.password = '';
            }
          }
        },
        togglePasswordVisibility() {
          this.passwordVisible = !this.passwordVisible;
        },
        loginUser() {
          // 先验证所有字段
          this.validateLoginField('email');
          this.validateLoginField('password');
          
          // 如果有错误，不继续执行
          if (this.login.errors.email || this.login.errors.password) {
            return;
          }
          
          // 模拟登录验证
          // 在实际应用中，这里应该是一个API调用
          this.login.message = '正在登录...';
          this.login.isSuccess = false;
          
          // 模拟API请求延迟
          setTimeout(() => {
            if (this.login.email === 'test@example.com' && this.login.password === '123456') {
              this.login.message = '登录成功，正在跳转...';
              this.login.isSuccess = true;
              
              // 模拟登录成功后的跳转
              setTimeout(() => {
                window.location.href = 'index.html';
              }, 1500);
            } else {
              this.login.message = '邮箱或密码错误';
              this.login.isSuccess = false;
            }
          }, 1000);
        },
        // 收藏功能方法
        toggleFavorite(type, id) {
          // 确保favorites对象存在
          if (!this.favorites) {
            this.favorites = {};
          }
          
          // 确保类型数组存在
          if (!this.favorites[type]) {
            this.favorites[type] = [];
          }
          
          // 查找id在数组中的索引
          const index = this.favorites[type].indexOf(id);
          
          if (index === -1) {
            // 如果不存在，添加到收藏
            this.favorites[type].push(id);
          } else {
            // 如果存在，从收藏中移除
            this.favorites[type].splice(index, 1);
          }
          
          // 保存到localStorage
          localStorage.setItem('favorites', JSON.stringify(this.favorites));
        },
        isFavorite(type, id) {
          // 检查是否收藏
          return this.favorites && this.favorites[type] && this.favorites[type].includes(id);
        },
        // 路由导航方法
        navigateTo(path) {
          navigateTo(this.$router, path);
        }
      },
      mounted() {
        // 初始化路由
        initRouter(this);
        // 加载数据到store
        this.$store.dispatch('loadFoods');
      }
    });
  </script>
  
  <!-- 页脚 -->
  <footer-component></footer-component>
</body>
</html>  